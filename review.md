
# –£–∫—Ä–æ—â–∞–µ–º –∑–æ–æ–ø–∞—Ä–∫ API: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Python-–∫–ª–∏–µ–Ω—Ç –¥–ª—è GigaChat, YandexGPT –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (v0.5.0)

## –í–≤–µ–¥–µ–Ω–∏–µ
–ü—Ä–∏–≤–µ—Ç, –•–∞–±—Ä! üëã

–ï—Å–ª–∏ –≤—ã –ø—Ä–æ–±–æ–≤–∞–ª–∏ –≤–Ω–µ–¥—Ä—è—Ç—å —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ LLM –≤ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å "–∑–æ–æ–ø–∞—Ä–∫–æ–º" API. –£ GigaChat ‚Äî OAuth2 –∏ —Å–≤–æ–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —É YandexGPT ‚Äî IAM-—Ç–æ–∫–µ–Ω—ã –∏ gRPC/REST, —É –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ Ollama ‚Äî —Ç—Ä–µ—Ç–∏–π —Ñ–æ—Ä–º–∞—Ç.

–í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –º–Ω–µ –Ω–∞–¥–æ–µ–ª–æ –ø–∏—Å–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ `if provider == 'gigachat': ... elif provider == 'yandex': ...`, –∏ —è —Ä–µ—à–∏–ª —Å–æ–∑–¥–∞—Ç—å **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏**.

–¢–∞–∫ –ø–æ—è–≤–∏–ª—Å—è **Multi-LLM Orchestrator** ‚Äî open-source –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ LLM —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–º–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ –æ—à–∏–±–∫–µ).

–°–µ–≥–æ–¥–Ω—è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ —è –µ—ë –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª, —Å –∫–∞–∫–∏–º–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **–ø–æ—Ç–æ–∫–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Streaming)**, –∏ –∫–∞–∫ –∑–∞ –Ω–µ–¥–µ–ª—é –¥–æ–≤–µ–ª –ø—Ä–æ–µ–∫—Ç –¥–æ –≤–µ—Ä—Å–∏–∏ **v0.5.0** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π LangChain –∏ 92% –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏.

---

## –ü—Ä–æ–±–ª–µ–º–∞: "–ö–∞–∂–¥—ã–π –ø–∏—à–µ—Ç —Å–≤–æ–π –≤–µ–ª–æ—Å–∏–ø–µ–¥"

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É: –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –º–æ–¥–µ–ª—å, –Ω–æ –µ—Å–ª–∏ –°–±–µ—Ä "–ª–µ–∂–∏—Ç" –∏–ª–∏ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É 500 ‚Äî –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ YandexGPT.

–ë–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∫–æ–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ "—Å–ø–∞–≥–µ—Ç—Ç–∏":

```
async def generate_response(prompt):
    try:
        # –ü—ã—Ç–∞–µ–º—Å—è GigaChat
        token = await get_gigachat_token()  # OAuth2 –ª–æ–≥–∏–∫–∞
        response = await requests.post(..., headers={"Authorization": f"Bearer {token}"})
        return response.json()['choices']['message']['content']
    except Exception:
        # –ü—ã—Ç–∞–µ–º—Å—è YandexGPT
        response = await requests.post(..., headers={"Authorization": f"Bearer {iam_token}"})
        return response.json()['result']['alternatives']['message']['text']
```

–ê —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞:
- –û–±—Ä–∞–±–æ—Ç–∫—É Rate Limits (429)
- –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã `messages`
- –†–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`max_tokens` vs `maxTokens`)
- **Streaming** (–ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É —Ç–æ–∫–µ–Ω–æ–≤), –≥–¥–µ —É –∫–∞–∂–¥–æ–≥–æ API —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç —á–∞–Ω–∫–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏

---

## –†–µ—à–µ–Ω–∏–µ: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–Ø –≤—ã–¥–µ–ª–∏–ª —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:

1. **Provider (–ü—Ä–æ–≤–∞–π–¥–µ—Ä)** ‚Äî –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º API (GigaChat, Yandex, Ollama, Mock). –û–Ω –∑–Ω–∞–µ—Ç, –∫–∞–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç (–æ–±—ã—á–Ω—ã–π –∏–ª–∏ –ø–æ—Ç–æ–∫–æ–≤—ã–π).
2. **Router (–†–æ—É—Ç–µ—Ä)** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–±–æ—Ä–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –£–º–µ–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: `round-robin` (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞), `random` –∏ `first-available`.
3. **Config** ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ Pydantic.

*(–í—Å—Ç–∞–≤—å –¥–∏–∞–≥—Ä–∞–º–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –µ—Å–ª–∏ –µ—Å—Ç—å)*

### –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–¢–µ–ø–µ—Ä—å –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–≥–ª—è–¥–∏—Ç —á–∏—Å—Ç–æ –∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ:

```
from orchestrator import Router
from orchestrator.providers import GigaChatProvider, YandexGPTProvider, ProviderConfig

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º —Ä–æ—É—Ç–µ—Ä
router = Router(strategy="round-robin")

# –î–æ–±–∞–≤–ª—è–µ–º GigaChat
router.add_provider(GigaChatProvider(
    ProviderConfig(name="sber", api_key="...", scope="GIGACHAT_API_PERS")
))

# –î–æ–±–∞–≤–ª—è–µ–º YandexGPT
router.add_provider(YandexGPTProvider(
    ProviderConfig(name="yandex", api_key="...", folder_id="...", model="yandexgpt/latest")
))

# –ò—Å–ø–æ–ª—å–∑—É–µ–º! –ï—Å–ª–∏ –æ–¥–∏–Ω —É–ø–∞–¥–µ—Ç ‚Äî —Ä–æ—É—Ç–µ—Ä —Å–∞–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π
response = await router.route("–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?")
```

---

## –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### 1. GigaChat –∏ "–ø—Ä–æ—Ç—É—Ö–∞—é—â–∏–µ" —Ç–æ–∫–µ–Ω—ã

–°–±–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OAuth2 Client Credentials flow. –ì–ª–∞–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å ‚Äî —Ç–æ–∫–µ–Ω –∂–∏–≤–µ—Ç 30 –º–∏–Ω—É—Ç.

–í `GigaChatProvider` —è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–º: –æ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º. –ï—Å–ª–∏ API –≤–µ—Ä–Ω—É–ª 401 (—Ç–æ–∫–µ–Ω –æ—Ç–æ–∑–≤–∞–Ω —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏), –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–∞–º –æ–±–Ω–æ–≤–∏—Ç –µ–≥–æ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å.

### 2. YandexGPT –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏

–£ –Ø–Ω–¥–µ–∫—Å–∞ –¥—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞: –Ω—É–∂–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ IAM-—Ç–æ–∫–µ–Ω, –Ω–æ –∏ `folder_id` (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ –æ–±–ª–∞–∫–µ), –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `x-folder-id`. –ü—Ä–∏—à–ª–æ—Å—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

```
class ProviderConfig(BaseModel):
    name: str
    api_key: str | None = None
    folder_id: str | None = None  # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è Yandex
    # ...
```

### 3. –°–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ: Streaming (–ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è) üåä

–ö –≤–µ—Ä—Å–∏–∏ **v0.5.0** —è –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É Streaming. –≠—Ç–æ –∫–æ–≥–¥–∞ –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–µ —Ü–µ–ª–∏–∫–æ–º, –∞ –ø–æ –∫—É—Å–æ—á–∫–∞–º (—Ç–æ–∫–µ–Ω–∞–º), –∫–∞–∫ –≤ ChatGPT.

–≠—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å:

1. **–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:** GigaChat –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Server-Sent Events (SSE) —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `data:`, –ª–æ–∫–∞–ª—å–Ω–∞—è Ollama –æ—Ç–¥–∞–µ—Ç JSON-–æ–±—ä–µ–∫—Ç—ã, –∞ –º–æ–∫-–ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø—Ä–æ—Å—Ç–æ —ç–º—É–ª–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏.
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –ø–æ—Ç–æ–∫–µ:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–ª–æ—Å—å –Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω–µ —Ñ—Ä–∞–∑—ã?
   - *–ú–æ–µ —Ä–µ—à–µ–Ω–∏–µ:* –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ **–¥–æ** –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —á–∞–Ω–∫–∞ ‚Äî —Ä–æ—É—Ç–µ—Ä –¥–µ–ª–∞–µ—Ç fallback –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —É–∂–µ –Ω–∞—á–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å—Å—è ‚Äî fallback –Ω–µ –¥–µ–ª–∞–µ—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ —Å–º–µ—à–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞:

```
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback
async for chunk in router.route_stream("–ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ Python"):
    print(chunk, end="", flush=True)
```

---

## –≠–≤–æ–ª—é—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–∏–≤–∞–ª—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ —Ñ–∏–¥–±–µ–∫–∞ –∫–æ–ª–ª–µ–≥. –ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–æ—Å—å –∫ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏:

1. **Ollama Provider** (v0.3.x): –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≥–æ–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Llama 3, Mistral) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback, –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞.

2. **LangChain Integration** (v0.4.0): –Ø –Ω–∞–ø–∏—Å–∞–ª wrapper `MultiLLMOrchestrator`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤–º–µ—Å—Ç–∏–º —Å `BaseLLM`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤ –ª—é–±—ã–µ —Ü–µ–ø–æ—á–∫–∏ (Chains) –∏ –∞–≥–µ–Ω—Ç—ã LangChain –æ–¥–Ω–æ–π —Å—Ç—Ä–æ—á–∫–æ–π:

```
# pip install multi-llm-orchestrator[langchain]
from orchestrator.langchain import MultiLLMOrchestrator

llm = MultiLLMOrchestrator(router=router)
# –¢–µ–ø–µ—Ä—å 'llm' –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ LangChain chains!
```

3. **Streaming Support** (v0.5.0): –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è GigaChat —Å SSE-–ø–∞—Ä—Å–∏–Ω–≥–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChain streaming.

---

## –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: Mypy, Ruff –∏ —Ç–µ—Å—Ç—ã

–Ø –≤–µ—Ä—é, —á—Ç–æ Open Source –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º. –í CI/CD –∑–∞—à–∏—Ç—ã –∂–µ—Å—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- **Mypy** –≤ —Ä–µ–∂–∏–º–µ `--strict`. –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å–ø–∞—Å–ª–∞ –æ—Ç –∫—É—á–∏ –±–∞–≥–æ–≤.
- **Ruff** –∫–∞–∫ –ª–∏–Ω—Ç–µ—Ä.
- **Tests Coverage ‚âà 92%**. –ù–∞–ø–∏—Å–∞–Ω–æ 133 —Ç–µ—Å—Ç–∞, –≤–∫–ª—é—á–∞—è —Ç–µ—Å—Ç—ã –Ω–∞ SSE-—Å—Ç—Ä–∏–º–∏–Ω–≥ –∏ –º–æ–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ rate limits.

**–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:**
- ‚úÖ 133 —Ç–µ—Å—Ç–∞ (–≤–∫–ª—é—á–∞—è 18 –¥–ª—è LangChain integration)
- ‚úÖ 92% –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (asyncio/httpx)
- ‚úÖ 4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞: GigaChat, YandexGPT, Ollama, Mock
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å LangChain (streaming included)

---

## –ë–æ–µ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Real-world testing)

–¢–µ—Å—Ç—ã –Ω–∞ –º–æ–∫–∞—Ö ‚Äî —ç—Ç–æ –±–∞–∑–∞, –Ω–æ —Ä–µ–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ. –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º —è –ø—Ä–æ–≤–µ–ª —Å–µ—Ä–∏—é ¬´–±–æ–µ–≤—ã—Ö¬ª —Ç–µ—Å—Ç–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –æ—Ç –°–±–µ—Ä–∞ –∏ –Ø–Ω–¥–µ–∫—Å–∞.

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ (Round-Robin)

–í–æ—Ç –ª–æ–≥ —Ä–∞–±–æ—Ç—ã —Ä–æ—É—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏. –ó–∞–ø—Ä–æ—Å—ã —É—Ö–æ–¥—è—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏:

*(–í—Å—Ç–∞–≤—å —Å—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º, –≥–¥–µ –≤–∏–¥–Ω—ã —á–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã)*

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–¥—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.

### 2. Streaming –≤ –¥–µ–π—Å—Ç–≤–∏–∏ (New in v0.5.0!)

–°–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äî —ç—Ç–æ **–ø–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**. –¢–µ–ø–µ—Ä—å –æ—Ç–≤–µ—Ç –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å —Ü–µ–ª–∏–∫–æ–º, –æ–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ —Ç–æ–∫–µ–Ω–∞–º, –∫–∞–∫ –≤ ChatGPT.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ GigaChat:

```
from orchestrator import Router
from orchestrator.providers import GigaChatProvider, ProviderConfig

router = Router(strategy="round-robin")
config = ProviderConfig(
    name="gigachat",
    api_key="your_key_here",
    model="GigaChat",
    verify_ssl=False  # –î–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –°–±–µ—Ä–∞
)
router.add_provider(GigaChatProvider(config))

# Streaming: —Ç–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
async for chunk in router.route_stream("–ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ Python"):
    print(chunk, end="", flush=True)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ (—Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ GigaChat):**

```
Python –Ω–µ–∂–Ω—ã–π, –≥–∏–±–∫–∏–π –∫–æ–¥
–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤ —Å–µ—Ç–∏ —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç.
–ì–¥–µ –ª–æ–≥–∏–∫–∞ –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞ ‚Äî
–í–æ—Ç —Å–µ–∫—Ä–µ—Ç —É—Å–ø–µ—Ö–∞ –≤—Å–µ–≥–¥–∞!

–ó–Ω–∞–∫–∏ —Å–∫–æ–±–æ–∫ –µ–¥–≤–∞ –≤–∏–¥–Ω—ã,
–¶–∏–∫–ª—ã –ª–æ–≤–∫–æ –ø–æ–±–µ–∂–¥–µ–Ω—ã,
–ë—É–ª–µ–≤—ã –∏—Å—Ç–∏–Ω—ã –∏ –ª–∂–∏ ‚Äî
–ß—É–¥–æ-–º—ç–π—Ä –¥–æ–≤–æ–ª–µ–Ω–ª–∏—à—å.
```

–¢–µ–∫—Å—Ç –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Å–ª–æ–≤–æ –∑–∞ —Å–ª–æ–≤–æ–º. –°–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç.

### 3. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–Ø –Ω–∞–ø–∏—Å–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç (`examples/real_tests/test_streaming_real.py`), –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ—Ä—è–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏. –í–æ—Ç —á—Ç–æ –æ–Ω –ø–æ–∫–∞–∑–∞–ª –ø—Ä–∏ –≤—ã–∑–æ–≤–µ **—Ä–µ–∞–ª—å–Ω–æ–≥–æ GigaChat API**:

*(–í—Å—Ç–∞–≤—å —Å–∫—Ä–∏–Ω—à–æ—Ç —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–µ—Ç—Ä–∏–∫ –∏–∑ —Ç–µ—Å—Ç–∞)*

```
‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
‚îÇ Metric            ‚îÇ Value      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TTFT              ‚îÇ 1.3s       ‚îÇ
‚îÇ Total Time        ‚îÇ 1.7s       ‚îÇ
‚îÇ Tokens Generated  ‚îÇ 212        ‚îÇ
‚îÇ Speed             ‚îÇ 125.2 tok/s‚îÇ
‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ
```

- **TTFT** (Time to First Token): 1.3 —Å–µ–∫—É–Ω–¥—ã –æ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–æ–≤–∞. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç OAuth2-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –°–±–µ—Ä–∞.
- **Speed**: **125 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫** ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º API. –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —á–∏—Ç–∞–µ—Ç —Å—Ä–µ–¥–Ω–∏–π —á–µ–ª–æ–≤–µ–∫.
- **Total Time**: 1.7 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é 212 —Ç–æ–∫–µ–Ω–æ–≤ (–ø–æ–ª–Ω–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ).

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Fallback

–¢–∞–∫–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –æ—à–∏–±–∫–æ–π: **—á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ GigaChat –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?**

–Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —É–∫–∞–∑–∞–ª –Ω–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á –¥–ª—è GigaChat, –∏ —Ä–æ—É—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –Ω–∞ YandexGPT **–¥–æ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–∏–º–∞**. –í–æ—Ç —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

1. –†–æ—É—Ç–µ—Ä –ø–æ–ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å GigaChat ‚Üí –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É `401 Unauthorized`.
2. **–î–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª —Ö–æ—Ç—å –æ–¥–Ω–æ —Å–ª–æ–≤–æ**, —Ä–æ—É—Ç–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –Ω–∞ YandexGPT.
3. –¢–µ–∫—Å—Ç –Ω–∞—á–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å—Å—è –æ—Ç YandexGPT, –∫–∞–∫ –±—É–¥—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ.

**–ú–µ—Ç—Ä–∏–∫–∏ fallback-—Ç–µ—Å—Ç–∞:**
```
TTFT: 1.6s | Total Time: 1.6s | Speed: 66.9 tok/s
```

**–í–∞–∂–Ω–æ:** –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ç–æ–∫–µ–Ω —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω ‚Äî fallback –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, —á—Ç–æ–±—ã –Ω–µ —Å–º–µ—à–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è streaming API.

---

## –ö–∞–∫ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å?

–ü—Ä–æ–µ–∫—Ç —É–∂–µ –Ω–∞ PyPI. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–∞—è:

```
pip install multi-llm-orchestrator

# –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å LangChain:
pip install multi-llm-orchestrator[langchain]
```

### –ü—Ä–∏–º–µ—Ä —Å YandexGPT

```
import asyncio
from orchestrator import Router
from orchestrator.providers import YandexGPTProvider, ProviderConfig

async def main():
    router = Router(strategy="first-available")
    
    config = ProviderConfig(
        name="yandex",
        api_key="–≤–∞—à_iam_token",
        folder_id="–≤–∞—à_folder_id",
        model="yandexgpt/latest"
    )
    
    router.add_provider(YandexGPTProvider(config))
    
    try:
        response = await router.route("–†–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É –ø—Ä–æ Python")
        print(response)
    except Exception as e:
        print(f"–í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã: {e}")

asyncio.run(main())
```

---

## –ü–ª–∞–Ω—ã (Roadmap)

**–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (v0.5.0):**
- ‚úÖ –£–º–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –∏ Fallback
- ‚úÖ GigaChat, YandexGPT, Ollama, Mock
- ‚úÖ Streaming (–ø–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChain (–≤–∫–ª—é—á–∞—è streaming)

**–í –ø–ª–∞–Ω–∞—Ö (v0.6.0+):**
- üõ† **Observability:** –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ (latency, error rate) –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ Prometheus/Grafana
- üõ† **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥:** –£—á—ë—Ç –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
- üõ† **YandexGPT streaming:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞ YandexGPT

---

## –ü—Ä–∏–≥–ª–∞—à–∞—é –∫ —É—á–∞—Å—Ç–∏—é!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç—ã–π (MIT License). –ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö LLM ‚Äî –∑–∞–ª–µ—Ç–∞–π—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—ã ‚≠ê –∏ –∫–∏–¥–∞–π—Ç–µ PR-—ã!

üîó **GitHub:** [github.com/MikhailMalorod/Multi-LLM-Orchestrator](https://github.com/MikhailMalorod/Multi-LLM-Orchestrator)  
üì¶ **PyPI:** [pypi.org/project/multi-llm-orchestrator/](https://pypi.org/project/multi-llm-orchestrator/)

–ë—É–¥—É —Ä–∞–¥ –ª—é–±–æ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∫—Ä–∏—Ç–∏–∫–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö! üëá

